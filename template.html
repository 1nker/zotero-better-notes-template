// @author: YuankunLiu [PUBLISH PAGE URL](https://github.com/lyk7539511/zotero-better-notes-templateï¼‰
// @author: Kingw413 [PUBLISH PAGE URL](https://github.com/windingwind/zotero-better-notes/discussions/598)
<h1 style="text-align: center">${topItem.getField('title')}</h1>
<hr/>
<h2 style="color: #1B5E20; background-color:#F1F8E9;">ğŸ’¡ Meta Data</h2>

<table>
    <tr>
        <th style="background-color:#dbeedd;">
                <p style="text-align: left; display: inline;">Title</p> <!-- æ ‡é¢˜ -->
        </th>
        <td style="background-color:#dbeedd;">
            ${topItem.getField('title')}
        </td>
    </tr>
    <tr>
        <th style="background-color:#f3faf4;">
                <p style="text-align: left; display: inline;">Journal</p> <!-- æœŸåˆŠ  -->
        </th>
        <td style="background-color:#f3faf4;">
            ${topItem.getField('publicationTitle')}
        </td>
    </tr>
    <tr>
        <th style="background-color:#dbeedd;">
                <p style="text-align: left; display: inline;">Authors</p> <!-- ä½œè€… -->
        </th>
        <td style="background-color:#dbeedd;">
            ${topItem.getCreators().map((v)=>v.firstName+" "+v.lastName).join("; ")}
        </td>
    </tr>
    <tr>
        <th style="background-color:#f3faf4;">
            <p style="text-align: left; display: inline;">Date</p> <!-- å‡ºç‰ˆæ—¥æœŸ -->
        </th>
        <td style="background-color:#f3faf4;">
        	${topItem.getField('date')}
        </td>
    </tr>
    <tr>
        <th style="background-color:#dbeedd;">
            <p style="text-align: left; display: inline;">Tags</p> <!-- æ–‡çŒ®ä¿¡æ¯ -->
        </th>
        <td style="background-color:#dbeedd;">
          ${(() => {
            let jsonString = "";
            let tags = topItem.getField('extra');
            let out = "";
            if (tags) {
              const lines = tags.split("\n");
              const jsonObj = {};
              lines.forEach(line => {
                const [key, value] = line.split(": ");
                jsonObj[key] = value;
              });

              jsonString = JSON.stringify(jsonObj);

              if (jsonString) {
                const jsonStartIndex = jsonString.indexOf('{');
                if (jsonStartIndex !== -1) {
                  jsonString = jsonString.slice(jsonStartIndex);
                }

              const keyValuePairs = JSON.parse(jsonString);
              const colors = ["#eea2a4", "#fbda41", "#83cbac", "#2ea8e5", "#a28ae5"];

              for (const key in keyValuePairs) {
                  if (key === "JCRåˆ†åŒº") {
                      out += `<span style="background-color: ${colors[0]}; margin-right: 20px; padding:5px">JCRåˆ†åŒºï¼š${keyValuePairs[key]} </span>`;
                  }
                  if (key === "ä¸­ç§‘é™¢åˆ†åŒºå‡çº§ç‰ˆ") {
                      out += `<span style="background-color: ${colors[1]}; margin-right: 20px; padding:5px">ä¸­ç§‘é™¢åˆ†åŒºï¼š${keyValuePairs[key]} </span>`;
                  }
                  if (key === "å½±å“å› å­") {
                      out += `<span style="background-color: ${colors[2]}; margin-right: 20px; padding:5px">IF: ${keyValuePairs[key]} </span>`;
                  }
                }
              }
            }
            return out;
        })()}
        </td>
    </tr>
    <tr>
        <th style="background-color:#f3faf4;">
            <p style="text-align: left; display: inline;">DOI</p> <!-- DOI -->
    	</th>
        <td style="background-color:#f3faf4;">
            <a href="https://doi.org/${topItem.getField('DOI')}">${topItem.getField('DOI')}</a>
        </td>
    </tr>
    <tr>
        <th style="background-color:#dbeedd;">
            <p style="text-align: left; display: inline;">Attachment</p> <!-- é™„ä»¶ -->
    	</th>
        <td style="background-color:#dbeedd;">
            <a href="zotero://open-pdf/0_${Zotero.Items.get(topItem.getAttachments())[0].key}">
            ${Zotero.Items.get(topItem.getAttachments())[0].getFilename()}</a>
        </td>
    </tr>
</table>

<h2 style="color: #E65100; background-color: #FFF8E1;">ğŸ“œ Basic Information</h2>
<hr />

<h3> <span style="color: #1565C0">Abstract: </span></h3>
<p></p>

<h3> <span style="color: #1565C0">Innovations: </span></h3>
<p></p>

<h2 style="color: #2E7D32; background-color:#F1F8E9;">&#x1F4CA Research Content</h2>
<hr />

<h3> <span style="color: #1565C0">Data: </span></h3>
<p></p>

<h3> <span style="color: #1565C0">Model: </span></h3>
<p></p>

<h3> <span style="color: #1565C0">Code: </span></h3>
<p></p>

<h2 style="color: #4A148C; background-color: #F5F5F5;">ğŸš© Conclusions</h2>
<hr />
<p></p>

<h2 style="color: #f1939c; background-color: #e6d2d5;">ğŸ“Œ Q & A</h2>
<hr />
<p></p>

<h2 style="color: #1565C0; background-color: #E1F5FE;">ğŸ”¬ Future Work</h2>
<hr />
<p></p>
